<div
    #trigger="cdkOverlayOrigin"
    cdkOverlayOrigin
    class="input-date"
    [class]="{
        'input-date_disabled': disabled,
        'input-date_invalid': valueControl.invalid
    }"
>
    <evo-input-date-inner
        [hasTime]="hasTime"
        [formControl]="valueControl"
        [disabled]="disabled"
        [min]="min"
        [max]="max"
        (input)="updateValue($event)"
    ></evo-input-date-inner>

    <evo-icon shape="calendar" class="input-date__icon" (click)="isOpen = !isOpen"></evo-icon>
</div>

<ng-template
    cdkConnectedOverlay
    [cdkConnectedOverlayScrollStrategy]="scrollStrategy"
    [cdkConnectedOverlayOrigin]="trigger"
    [cdkConnectedOverlayOpen]="isOpen"
    (overlayOutsideClick)="isOpen = !isOpen"
>
    <evo-calendar [date]="value" [hasTime]="hasTime" (dateChange)="onSelectedDate($event)" [min]="min" [max]="max"></evo-calendar>
</ng-template>
