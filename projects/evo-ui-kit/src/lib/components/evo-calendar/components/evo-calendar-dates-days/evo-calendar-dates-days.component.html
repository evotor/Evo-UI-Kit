<div
    *ngIf="(calendar$ | async) as calendar"
    class="calendar-days"
    [class]="{'calendar-days_is-range': isRangeMode$ | async}"
>
    <div class="calendar-days__grid">
        <div *ngFor="let week of DAYS_OF_WEEK; trackBy: weekTrackByFn" class="calendar-days__weekday">{{ week }}</div>
    </div>

    <div class="calendar-days__grid">
        <ng-container *ngFor="let item of calendar.previousMonth.days; trackBy: dayTrackByFn">
            <ng-container *ngTemplateOutlet="dayTemplate; context: {item: item, monthType: CalendarDayMonthType.PREVIOUS}"></ng-container>
        </ng-container>
        <ng-container *ngFor="let item of calendar.currentMonth.days; trackBy: dayTrackByFn">
            <ng-container *ngTemplateOutlet="dayTemplate; context: {item: item, monthType: CalendarDayMonthType.CURRENT}"></ng-container>
        </ng-container>
        <ng-container *ngFor="let item of calendar.nextMonth.days; trackBy: dayTrackByFn">
            <ng-container *ngTemplateOutlet="dayTemplate; context: {item: item, monthType: CalendarDayMonthType.NEXT}"></ng-container>
        </ng-container>
        <ng-template #dayTemplate let-item="item" let-monthType="monthType">
            <div
                class="calendar-days__day"
                [class]="getDayClasses('calendar-days__day', item, monthType)"
                (click)="onDayClick($event, item)"
                (mouseover)="onDayMouseover($event, item)"
                (mouseleave)="onDayMouseout($event, item)"
            >
                <div class="calendar-days__day-value">{{ item.day }}</div>
            </div>
        </ng-template>
    </div>
</div>
