@import '../../../../styles/mixins';

.calendar-dates {
    --inner-gap: 8px;
    --inner-size: 24px;
    --inner-padding-v: calc(var(--inner-gap) * 0.5);
    --inner-padding-h: calc(var(--inner-gap) * 0.5);
    --inner-border-radius: 12px;
    --inner-border-radius-small: 2px;
    --inner-border-color: transparent;

    --inner-value-color: var(--evo-calendar-date-color);
    --inner-background: var(--evo-calendar-background);
    --inner-value-background: var(--evo-calendar-background);

    --inner-date-value-offset-left: var(--inner-padding-h);
    --inner-date-value-offset-right: var(--inner-padding-h);
    --inner-date-border-left-radius: var(--inner-border-radius);
    --inner-date-border-right-radius: var(--inner-border-radius);

    display: flex;
    gap: 8px;
    padding: 20px; // paddings reduced by date paddings
    flex-direction: column;

    &__grid {
        --inner-size-with-gaps: calc(var(--inner-size) + var(--inner-gap));

        display: grid;
        grid-template-columns: repeat(7, var(--inner-size-with-gaps));
        grid-auto-rows: var(--inner-size-with-gaps);
        gap: 0; // gaps made via padding to make hover smoother
    }

    &__date-value {
        position: relative;
        z-index: 10; // to be over parent's sub-background (see :after pseudo-element)
        width: var(--inner-size);
        height: var(--inner-size);
        border-radius: var(--inner-border-radius);
        color: var(--inner-value-color);
        background: var(--inner-value-background);
        border-width: 1px;
        border-style: solid;
        border-color: var(--inner-border-color);
        display: flex;
        align-items: center;
        justify-content: center;
        @include evo-text-caption(c1);
    }

    &__date {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        aspect-ratio: 1/1;
        padding: var(--inner-padding-v) var(--inner-padding-h);
        cursor: pointer;

        // sub background to cover gaps between days on range mode
        &:after {
            content: '';
            position: absolute;
            pointer-events: none;
            top: var(--inner-padding-v);
            bottom: var(--inner-padding-h);
            left: var(--inner-date-value-offset-left);
            right: var(--inner-date-value-offset-right);
            width: auto;
            height: var(--inner-size);
            background: var(--inner-background);
            border-radius: //
                var(--inner-date-border-left-radius) //
                var(--inner-date-border-right-radius) //
                var(--inner-date-border-right-radius) //
                var(--inner-date-border-left-radius);
        }

        // weekdays modifier
        &_type_weekday {
            --inner-value-color: var(--evo-calendar-weekday-color);
            pointer-events: none;
            cursor: default;
            text-transform: capitalize;
        }

        // month-type modifiers
        &_month-type_prev,
        &_month-type_next {
            --inner-value-color: var(--evo-calendar-adjacent-color);
            --inner-value-background: var(--evo-calendar-adjacent-background);
        }

        // basic states
        &:hover {
            --inner-background: var(--evo-calendar-hover-background);
            --inner-value-background: var(--evo-calendar-hover-background);
            --inner-value-color: var(--evo-calendar-hover-color);
        }

        &_disabled {
            pointer-events: none;
            --inner-value-color: var(--evo-calendar-disabled-color) !important;
        }

        &_today {
            --inner-border-color: var(--evo-calendar-today-border-color);
        }

        &_selected {
            --inner-background: var(--evo-calendar-selected-background);
            --inner-value-background: var(--evo-calendar-selected-background);
            --inner-value-color: var(--evo-calendar-selected-color);

            &:hover {
                --inner-value-background: var(--evo-calendar-selected-hover-background);
            }
        }

        // RANGE MODE MADNESS

        // first week day (left edge of grid) and range start has round left border
        &:nth-child(7n - 6):is(&_range):not(&_range_start):after {
            --inner-date-border-left-radius: var(--inner-border-radius-small);
        }

        // last week day (right edge of grid) and range end has no gap on the right side and round right border
        &:nth-child(7n):is(&_range):not(&_range_end):after {
            --inner-date-border-right-radius: var(--inner-border-radius-small);
        }

        &_range {
            // don't remove `px` â€” units matter!
            --inner-date-value-offset-left: 0px;
            --inner-date-value-offset-right: 0px;
            --inner-date-border-left-radius: 0px;
            --inner-date-border-right-radius: 0px;
        }

        &_range_start {
            --inner-date-border-left-radius: var(--inner-border-radius);
            --inner-date-value-offset-left: var(--inner-padding-h);
        }

        &_range_end {
            --inner-date-border-right-radius: var(--inner-border-radius);
            --inner-date-value-offset-right: var(--inner-padding-h);
        }

        &_range_to-select {
            --inner-background: var(--evo-calendar-selected-background);
            --inner-value-color: var(--evo-calendar-selected-color);
            --inner-value-background: var(--evo-calendar-selected-background);
        }
    }
}
